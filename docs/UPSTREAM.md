---
intent_id: DOC-LEGACY
owner: docs-core
status: active
last_reviewed_at: 2025-10-28
next_review_due: 2025-11-28
---

# 外部派生リポからの知見取り込み手順

Workflow Cookbook 系派生リポジトリ（例: `workflow-cookbook-documents`）から得られた改善点を、本リポジトリ固有の構成へ調整したうえで反映するためのガイドライン。

## 1. 対象リポジトリの選定基準

- **系統整合性**: Workflow Cookbook をベースとした派生であること。主要構成・抽象化レイヤーが共有され、特定プロダクト固有モジュールへの依存がない（または容易に切り離せる）こと。
- **変更の公開状況**: ライセンス互換（Apache-2.0 互換または OSS 公開）であり、差分を参照可能な状態（Git リポジトリまたは公開アーカイブ）であること。
- **運用実績**: 最新 1 か月以内にメンテナンス（コミットまたは Issue/PR 更新）が存在し、既知の重大障害が未解決でないこと。
- **成果の汎用性**: Chainlit 固有の UI/ホスティング要素を排した場合でも、ワークフローやガバナンス文書として有用な知見が得られること。

## 2. 取り込みフロー

1. **比較点の確定**: 対象リポジトリの最新安定コミット（タグ推奨）と、本リポジトリ内の対応資料をマッピングする。製品固有ファイルは除外し、Workflow Cookbook が共通で保持する構造・ガイドラインのみを比較対象とする。
2. **差分収集**: `git diff --stat` などで対象コミットとの差異を把握し、文書・テンプレート・チェックリストなどのカテゴリごとに整理する。
3. **評価記録**: 本ドキュメントの「Diff 評価観点」を用いて差分を判定し、結果を `docs/UPSTREAM_WEEKLY_LOG.md` に記入する。必要なフォローアップは `docs/TASKS.md` へタスク化する。
4. **反映/棄却判断**: 反映可能な差分はローカルで適用し、チェーン固有要素を除去したうえでレビューに回す。棄却する場合も理由をログへ明記する。
5. **クロージング**: 反映後は `CHANGELOG.md` または関連ドキュメントへ反映履歴を追記し、週次ログに「完了」ステータスを残す。

## 3. Diff 評価観点

- **適用範囲**: 既存のワークフロー／チェックリストに重複または矛盾がないか。Chainlit 固有項目（UI 操作手順、Chainlit 設定値など）は排除または代替案を提示する。
- **整合性**: `BLUEPRINT.md` や `GUARDRAILS.md` の原則と矛盾しないか。背反がある場合は差分を保留し、課題として記録する。
- **可観測性**: 反映後に検証可能なメトリクスまたはエビデンスが定義されているか。欠如している場合はエビデンス取得手段を追加する。
- **影響度**: 運用コスト・レイテンシへの影響が ±5% 以内か。超過する場合は根拠と緩和策をセットで記録する。
- **依存関係**: 新しい前提条件（外部サービス、追加ツールなど）が必要かどうか。必須の場合は `TASKS.md` へ依存の解消タスクを明記する。

## 4. `docs/TASKS.md` 連携ルール

- 週次ログで「フォローアップ」欄に記載した項目は、48 時間以内に `docs/TASKS.md` の適切なセクションへ Task Seed を追加する。
- タスクの `Objective` には派生リポ名・対象コミット ID を明記し、`Requirements` に Chainlit 排除方針と検証観点を記載する。
- 既存タスクとの重複が判明した場合は、重複先の Task Seed にリンクし、週次ログには参照先を残す。重複タスクは作成しない。
- タスク完了後は週次ログの該当行に完了日と PR/コミットリンクを記録し、`CHANGELOG.md` の未リリース節へ成果を追記する。

## 5. エビデンス管理

- 取り込んだ差分のレビュー記録（PR URL、承認者、主要コメント）は、週次ログの「フォローアップ」欄にリンクとして残す。
- 反映見送りの場合も、判断材料となった議事録や issue をログへ添付し、再評価タイミングを明記する。
- 重大なプロセス変更は `RUNBOOK.md` または該当運用ドキュメントに反映するまでクローズしない。
