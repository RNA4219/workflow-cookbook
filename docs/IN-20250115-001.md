---
incident_id: IN-20250115-001
occurred_at: 2025-01-15T04:12:00+09:00
owner: oncall@example
status: resolved
linked_pr: https://example.com/pr/123
runbook: ../RUNBOOK.md
---

# Incident (IN-20250115-001)

- 検知方法: 自動（Canary: 自動中止）
- 影響範囲: バッチ処理の決済集計が停止し、約1時間レポート更新が遅延
- 根本原因（5 Whys）:
  1. Canaryがエラー率の急上昇を検知しデプロイを中止した
  2. 新規リリースで外部APIのタイムアウトが短縮されていた
  3. タイムアウト値が環境変数から読み込まれずデフォルト5秒のままになった
  4. CIでの設定ファイルに新変数が反映されていなかった
  5. リリース手順のチェックリストで設定差分の確認項目が抜けていた
- 再発防止:
  - EVALUATION更新（Acceptance Criteriaに設定差分チェックを追加）
  - TEST強化（タイムアウト設定の回帰テスト追加）
  - RUNBOOK更新（Rollback手順に設定差分検証を追記）
- タイムライン（UTC+9）:
  - 04:12: Canaryが失敗を検知しSlackへ通知
  - 04:18: オンコールがデプロイを停止し影響範囲を確認
  - 04:35: 設定差分を修正し再デプロイ
  - 04:52: Canaryが成功し監視アラートが解消
  - 05:05: オンコールが事後対応を完了しインシデントをクローズ
