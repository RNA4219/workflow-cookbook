# Security Review Checklist

本チェックリストは、`workflow-cookbook` を利用するプロダクトでリリース前セキュリティ審査を行う際の最小セットです。各フェーズで該当項目を完了させ、証跡を残してください。

## 準備フェーズ

- [ ] アクセス制御ポリシーの適用範囲と権限モデルを整理する
  - 完了条件: 対象システムのユーザ／サービスアカウントごとに必要最小権限を定義し、レビュー用ドキュメントへ反映している
  - 参照: [SAC 原則 (1, 3, 9)](./SAC.md#原則), [Guardrails 行動指針](../../GUARDRAILS.md#guardrails--行動指針)
- [ ] 依存コンポーネントの脆弱性監査計画を確定する
  - 完了条件: 利用するスキャナ（`pip-audit` 等）と実行タイミングを決定し、CI/ローカルの運用手順へ組み込んでいる
  - 参照: [SAC 原則 (7, 10)](./SAC.md#原則), [ci-config ゲート](../ci-config.md)
- [ ] データ保護要件（PII/秘密情報）の分類と保護方針を合意する
  - 完了条件: 取り扱うデータ分類と保護メカニズム（暗号化、マスキング、保管場所）を記述し、レビュー参加者に共有済み
  - 参照: [SAC 原則 (1, 8)](./SAC.md#原則), [RUNBOOK データ取扱い方針](../../RUNBOOK.md)

## 実装フェーズ

- [ ] アクセス制御・認可実装のコードレビュー結果を記録する
  - 完了条件: 権限チェックが主要エントリーポイントに実装され、レビューコメントで承認済み（証跡 URL を残す）
  - 参照: [SAC 原則 (1, 3, 9)](./SAC.md#原則)
- [ ] 依存監査ツールの実行ログを保存する
  - 完了条件: 最新バージョンで監査を実施し、重大脆弱性が検出されない or 対応計画が記載されたレポートをリポジトリに保管
  - 参照: [SAC 原則 (7, 10)](./SAC.md#原則), [reusable/security-ci](../../.github/workflows/reusable/security-ci.yml)
- [ ] データ保護メカニズムを実装し検証する
  - 完了条件: 保存時暗号化・マスキング・転送経路保護などの実装をテストで確認し、テスト結果を記録
  - 参照: [SAC 原則 (1, 2, 8)](./SAC.md#原則), [EVALUATION 検証観点](../../EVALUATION.md)
- [ ] Guardrails の遵守状況を確認する
  - 完了条件: [`GUARDRAILS.md`](../../GUARDRAILS.md) に定義された最小読込・意図ゲート・行動指針の要件について、影響コンポーネントのコード／設定が準拠していることを証跡化
  - 参照: [Guardrails 行動指針](../../GUARDRAILS.md#guardrails--行動指針), [SAC 原則 (2, 4)](./SAC.md#原則)

## レビューフェーズ

- [ ] セキュリティ審査会議でリリース判定を記録する
  - 完了条件: 審査会議の議事録に各準備・実装項目のステータスとリスク評価を記入し、承認者がサインオフしている
  - 参照: [SAC 原則 (6, 10)](./SAC.md#原則), [CHECKLISTS リリース](../../CHECKLISTS.md#release)
- [ ] セキュリティゲート（SAST/Secrets/依存/Container）結果を確認する
  - 完了条件: `reusable/security-ci` の全ジョブが成功し、例外が必要な場合はリスク受容文書を添付して承認済み
  - 参照: [SAC 原則 (10)](./SAC.md#原則), [reusable/security-ci](../../.github/workflows/reusable/security-ci.yml)
- [ ] リリース後の監査・運用計画を更新する
  - 完了条件: インシデント対応手順・監査ログ保管・定期見直しサイクルを RUNBOOK / INCIDENT テンプレートへ反映し、次回レビュー期限を設定
  - 参照: [SAC 原則 (5, 8)](./SAC.md#原則), [INCIDENT TEMPLATE](../INCIDENT_TEMPLATE.md)

各項目の証跡は、PR テンプレートやリリースノートにリンクし、後続レビューで追跡できるようにしてください。
